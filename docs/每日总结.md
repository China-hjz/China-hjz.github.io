# æ¯æ—¥æ€»ç»“
## 7æœˆ11æ—¥
#### å½’å¹¶æ’åº
[**å½’å¹¶æ’åº**](https://oi-wiki.org/basic/merge-sort/) æ˜¯ä¸€ç§åŸºäºåˆ†æ²»æ€æƒ³çš„æ’åºç®—æ³•ã€‚åˆ†æ²»ï¼Œå³åˆ†è€Œæ²»ä¹‹ã€‚ä¸»è¦åŸç†æ˜¯å…ˆæŠŠä¸€ä¸ªå¤§é—®é¢˜åˆ†è§£ä¸ºå¤šä¸ªå°é—®é¢˜ï¼Œå†åˆ†åˆ«å¤„ç†ï¼Œæœ€ååˆå¹¶ã€‚  
##### å¥½å¤„
å¤æ‚åº¦ç›¸å¯¹ä¼šæ¯”å¿«æ’å¿«ä¸€ç‚¹ï¼Œä¹Ÿæ¯”å¿«æ’å¥½æ‰“  
ç‰¹åˆ«æ˜¯å¯¹äº~~ä¸è®©ç”¨**Sort**çš„è€å¸ˆ~~éœ€è¦æ‰‹æ‰“æ’åºçš„æƒ…å†µä¸‹  
 
##### **æ­¥éª¤**å¦‚ä¸‹ï¼š  
1. æŠŠé•¿åº¦ä¸ºnçš„æ•°ç»„é€’å½’åˆ†ä¸ºnæ®µ ï¼ˆåˆ†ï¼‰  
2. ä¸¤ä¸¤å’Œå¹¶ï¼Œæ¯æ¬¡å–ä¸¤ä¸ªå­åºåˆ—å¼€å¤´å°çš„æ•°æ”¾åœ¨ä¸€ä¸ªæ–°åºåˆ—é‡Œ ï¼ˆæ²»ï¼‰  
3. æŠŠæ–°åºåˆ—è¦†ç›–åˆ°æ—§åºåˆ—

##### The code there:
```cpp
#include <bits/stdc++.h>
using namespace std;
int a[1000000],b[1000000];
void sort(int l, int r)
{
	if (l==r) return;
	int mid=(r+l)/2;
	sort(l,mid); sort(mid+1,r);
	int x=l,y=mid+1,z=l;
	while (x <= mid && y <= r)
	{
		if (a[x]>a[y]) b[z++]=a[y++];
		else b[z++]=a[x++];
	}
	while (x<=mid) b[z++]=a[x++];
	while (y<=  r) b[z++]=a[y++];
	for (int i = l ; i <= r ; ++i) a[i]=b[i];
}
int main()
{
	int n; cin >> n;
	for (int i = 0 ; i < n ; ++i) scanf("%d",&a[i]);
	sort(0,n-1);
	for (int i = 0 ; i < n ; ++i) printf("%d\n",a[i]);
	return 0;
}

```
##### æ³¨æ„
å¦‚æœé¢˜ç›®çš„è¾“å…¥è¾“å‡ºçš„é‡å¾ˆå¤§ï¼Œè¦ç”¨scanfå’Œprintfï¼Œé€Ÿåº¦æ˜æ˜¾æ›´å¿«ã€‚

## 7æœˆ12æ—¥
#### çº¿æ®µæ ‘
[çº¿æ®µæ ‘](https://oi-wiki.org/ds/seg/) æ˜¯ç”¨äºè§£å†³åŒºé—´é—®é¢˜çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨äº†åˆ†æ²»æ€æƒ³ã€‚é¡¾åæ€ä¹‰â€œçº¿æ®µæ ‘â€ï¼Œå®ƒçš„æ¯ä¸ªç‚¹éƒ½æ˜¯ä¸€æ®µçº¿æ®µï¼Œç»´æŠ¤ç€ä¸€ä¸ªæ•°ç»„åŒºé—´ã€‚çº¿æ®µæ ‘å’¨è¯¢é€Ÿåº¦å¾ˆå¿«ï¼Œä¿®æ”¹ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚  

æ—¢ç„¶æ˜¯åˆ†æ²»ï¼Œé‚£ä¹ˆï¼Œä¸€ä¸ªé€’å½’æ“ä½œå°±åŒ…å«`ç»“æŸæ¡ä»¶`ã€`åˆ†åˆ«é€’å½’`å’Œ`åˆå¹¶å¤„ç†`ä¸‰ä¸ªéƒ¨åˆ†ã€‚  

ä¸€ä¸ª**æœ€åŸºæœ¬çš„**çš„çº¿æ®µæ ‘ä¼šåŒ…å«ä»¥ä¸‹å‡ ä¸ªå‡½æ•°ğŸ‘‡  
1. build() â€”â€”â€”â€” ç”¨äºå»ºæ ‘   
2. modify() â€”â€”â€” ç”¨äºä¿®æ”¹å•ç‚¹å…ƒç´   
3. query() â€”â€”â€” ç”¨äºå’¨è¯¢åŒºé—´å…ƒç´   

è€Œä¸”ï¼Œ`tree[x]`ä¸€èˆ¬è¡¨ç¤ºä¸ºxèŠ‚ç‚¹çš„åŒºé—´å€¼ï¼ˆæ¯”å¦‚åŒºé—´æœ€å¤§å€¼ï¼ŒåŒºé—´å’Œä¹‹ç±»çš„ï¼‰ï¼Œå¹¶ä¸éœ€è¦å­˜å‚¨åŒºé—´å¼€å¤´æˆ–ç»“å°¾ã€‚  

é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰åŒºé—´ä¿®æ”¹ï¼Œä¸€èˆ¬å¸¸ç”¨çš„æœ‰`æ‡’æƒ°æ ‡è®°`å’Œ`æ ‡è®°æ°¸ä¹…åŒ–`ä¸¤ä¸ªæ–¹æ³•ã€‚`æ‡’æƒ°æ ‡è®°`çš„æ–¹æ³•å®ç°éœ€è¦ä¸€ä¸ª**é¢å¤–**çš„`lazy`æ•°ç»„ï¼Œç”¨æ¥æ ‡è®°æ“ä½œã€‚ä¸å•ç‚¹ä¿®æ”¹ä¸åŒçš„æ˜¯ï¼Œ`æ‡’æƒ°æ ‡è®°`ä¸éœ€è¦é€’å½’åˆ°åº•å±‚ï¼Œåªéœ€è¦åœ¨åŒ…å«çš„ä¿®æ”¹åŒºé—´æ ‡è®°ä¸€ä¸‹ï¼Œå¦‚æœåˆ«çš„æ“ä½œéå†è¿‡è¿™ä¸ªèŠ‚ç‚¹ï¼Œå†**é¡ºä¾¿**æŠŠæ ‡è®°åº”ç”¨åˆ°å­èŠ‚ç‚¹ï¼ˆä¸€èˆ¬ä¸ºpush_down()å‡½æ•°ï¼‰ã€‚`æ‡’æƒ°æ ‡è®°`çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šä¸ä½¿ç”¨å°±ä¸ä¼šåº”ç”¨ï¼ˆåˆ°å­èŠ‚ç‚¹ï¼‰~~çœŸæ‡’~~ã€‚å¤§å¤§å‡å°‘äº†æ—¶é—´å¤æ‚åº¦ï¼Œä¸€èˆ¬æœ€åæ—¶é—´å¤æ‚åº¦ä¸ºO(log n) ã€‚~~å¯èƒ½å§~~

çº¿æ®µæ ‘ç”¨äºè§£å†³åŒºé—´é—®é¢˜ï¼Œæ¯”å¦‚åŒºé—´æœ€å¤§å€¼ï¼ŒåŒºé—´å’Œä¹‹ç±»çš„ï¼Œè¿˜æœ‰ [RMQ](https://oiwiki.com/topic/rmq/) é—®é¢˜ã€‚

ä¸è¯´äº†ï¼Œä¸Šä»£ç ï¼š
```cpp
#include <bits/stdc++.h>
#define int long long
//#define max(a,b) (a>b?a:b)
using namespace std;
//struct linetree
//{
int a[1000000],t[1000000],lazy[1000000];
void build(int l, int r, int x)
{
	if (l==r)
	{
		t[x]=a[l]; 
		return;
	}
	int mid=(l+r)/2;
	build(l,mid,x*2);
	build(mid+1,r,x*2+1);
	t[x]=max(t[x*2+1],t[x*2]);
	return;
}
void push_down(int x)
{
//	t[x]+=lazy[x];
	lazy[x*2]+=lazy[x];
	t[x*2]+=lazy[x];
	lazy[x*2+1]+=lazy[x];
	t[x*2+1]+=lazy[x];
	lazy[x]=0;
}
int query(int l, int r, int x, int L, int R)
{
	if (lazy[x]) push_down(x);
	if (l > R || r < L) return -0x7fffffff;
//	if (l == r) return t[x];
	if (L <= l && r <= R) return t[x];
	int mid=(l+r)/2,ans=-2000000000;
	
	ans=max(ans,query(l,mid,x*2,L,R));
	ans=max(ans,query(mid+1,r,x*2+1,L,R));
	return ans;
}
void modify(int l, int r, int x, int T, int v)
{
	if (l==r) 
	{
		a[T]=v;
		t[x]=v;
		return;
	}
	int mid=(l+r)/2;
	if (lazy[x]) push_down(x);
	if (T <= mid) modify(l,mid,x*2,T,v);
	else modify(mid+1,r,x*2+1,T,v);
	t[x]=max(t[x*2+1],t[x*2]);
	return;
}

void modifymax(int l, int r, int x, int L, int R, int value)
{
	if (l >= L && r <= R)
	{
		lazy[x]+=value;
		t[x]+=value;
		return;
	}
//	if (l > R || r < L) return;
	if (lazy[x]) push_down(x);
	int mid=(l+r)/2;
	if (L <= mid)modifymax(l,mid,x*2,L,R,value);
	if (R > mid) modifymax(mid+1,r,x*2+1,L,R,value);
	t[x]=max(t[x*2],t[x*2+1]);
}
//};
signed main()
{
	int n,m,x,y,z;
	scanf("%lld",&n);
	for (int i = 1 ; i <= n ; ++i) scanf("%lld",&a[i]);
	build(1,n,1);
	scanf("%lld",&m);
	for (int i = 0 ; i < m ; ++i) 
	{
		scanf("%lld",&x);
		if (x == 1)
		{
			scanf("%lld%lld%lld",&x,&y,&z);
			modifymax(1,n,1,x,y,z);
		} else {
			scanf("%lld%lld",&x,&y);
			printf("%lld\n",query(1,n,1,x,y));
		}
	}
	return 0;
}
```

##### å…¶ä»–
ä¸€äº›GMOJä¸Šçš„ä¾‹é¢˜ï¼š  
- [ã€çº¿æ®µæ ‘ã€‘æœ€å¤§å€¼ï¼ˆæ–°ç‰ˆï¼‰](https://gmoj.net/junior/#main/show/1380)  
[ä»£ç ](https://gmoj.net/junior/#main/code/547063)
- [ã€çº¿æ®µæ ‘ã€‘æœ€å¤§å€¼](https://gmoj.net/junior/#main/show/1379)  
[ä»£ç ](https://gmoj.net/junior/#main/code/546768)
- [ç»´æŠ¤åºåˆ—ï¼ˆseqï¼‰](https://gmoj.net/junior/#main/show/2262)  
[ä»£ç ](https://gmoj.net/junior/#main/code/547521)

![Jimmy](https://cdn.luogu.com.cn/upload/image_hosting/xqq856yn.png)

## 7æœˆ13æ—¥
#### [NOI2001] é£Ÿç‰©é“¾  
é¢˜ç›®ä¼ é€é—¨ï¼š[æ´›è°·P2024](https://www.luogu.com.cn/problem/P2024) && [gmojåˆä¸­1373](https://gmoj.net/junior/#main/show/1373)  

#### å¤§æ„
æœ‰ä¸‰ç§åŠ¨ç‰©åˆ†åˆ«ä¸ºAï¼ŒBï¼ŒCï¼Œå…³ç³»æ˜¯ï¼šAåƒBï¼ŒBåƒCï¼ŒCåƒAã€‚ç»™å‡ºKå¥è¯ï¼Œè¡¨ç¤ºæ¯ä¸ªåŠ¨ç‰©çš„å…·ä½“å…³ç³»ï¼Œé—®ä¸æˆç«‹çš„å…³ç³»æœ‰å¤šå°‘ã€‚  

#### æ€è·¯
è¿™é¢˜è¦ç”¨åˆ°ä¸€ç§ç‰¹æ®Šçš„å¹¶æŸ¥é›†ï¼šç§ç±»å¹¶æŸ¥é›†ã€‚  
è¿™ç§å¹¶æŸ¥é›†åˆ†ä¸ºå¤šä¸ªåºåˆ—ï¼Œåœ¨æœ¬é¢˜ä¸ºABCä¸‰ä¸ªåºåˆ—ï¼Œåˆ†åˆ«ä¸º3ä¸ªç§ç±»çš„åŠ¨ç‰©ã€‚
![](https://cdn.luogu.com.cn/upload/image_hosting/cucvmlwz.png)         
è¿™ç§æ–¹æ³•å¤„ç†æ–¹å¼ä¹Ÿæ˜¯å¾ˆå¥‡æ€ªï¼Œå³å¦‚æœä¸€ä¸ªåŠ¨ç‰©å’Œè‡ªå·±ç¾¤ç³»çš„å¦ä¸€ä¸ªåŠ¨ç‰©ï¼ˆåºåˆ—ï¼‰æœ‰å…±åŒç¥–å…ˆçš„è¯ï¼Œè¯´æ˜å®ƒå’Œé‚£ä¸ªåŠ¨ç‰©æ˜¯åŒç±»ã€‚  
å¦‚æœä¸€ä¸ªåŠ¨ç‰©å’Œä¸‹ä¸€ä¸ªç¾¤ç³»çš„å¦ä¸€ä¸ªåŠ¨ç‰©æœ‰å…±åŒç¥–å…ˆï¼Œè¯´æ˜å®ƒåƒé‚£ä¸ªåŠ¨ç‰©ã€‚
å¦‚æœä¸€ä¸ªåŠ¨ç‰©å’Œä¸Šä¸€ä¸ªç¾¤ç³»çš„å¦ä¸€ä¸ªåŠ¨ç‰©æœ‰å…±åŒç¥–å…ˆï¼Œè¯´æ˜å®ƒè¢«é‚£ä¸ªåŠ¨ç‰©åƒã€‚  

åˆ©ç”¨è¿™ä¸ªè§„å¾‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ¤æ–­è¯æ˜¯å¦ä¸ºçœŸäº†ï¼Œåªéœ€è¦è®°ä½è¿™ä¸‰ç‚¹  
- å¦‚æœYåƒXï¼Œé‚£ä¹ˆXå°±ä¸å¯èƒ½åƒY
- å¦‚æœYåƒXï¼Œé‚£ä¹ˆXå°±ä¸å¯èƒ½å’ŒYæ˜¯åŒç±»
- å¦‚æœXå’ŒYæ˜¯åŒç±»ï¼Œé‚£ä¹ˆXå°±ä¸å¯èƒ½åƒY  

å†åŠ ä¸Šé¢˜ç›®è¯´çš„
```
1ï¼‰ å½“å‰çš„è¯ä¸å‰é¢çš„æŸäº›çœŸçš„è¯å†²çªï¼Œå°±æ˜¯å‡è¯ï¼›

2ï¼‰ å½“å‰çš„è¯ä¸­Xæˆ–Yæ¯”Nå¤§ï¼Œå°±æ˜¯å‡è¯ï¼›

3ï¼‰ å½“å‰çš„è¯è¡¨ç¤ºXåƒXï¼Œå°±æ˜¯å‡è¯ã€‚
```
å°±å¯ä»¥åˆ¤æ–­æ˜¯å¦æ˜¯å‡è¯äº†ã€‚å¦‚æœä¸æ˜¯å‡è¯ï¼Œå†åˆ¤æ–­æ˜¯å¦æ˜¯XåƒYï¼Œè¿˜æ˜¯Xå’ŒYæ˜¯åŒç±»ã€‚  
å¦‚æœXåƒYï¼Œå°±æŠŠXå’Œä¸‹ä¸€ä¸ªç¾¤ç³»çš„Yè¿èµ·æ¥ï¼Œè¡¨ç¤ºXåƒYã€‚ï¼ˆAã€Bã€Céƒ½è¦ï¼ï¼ï¼‰  
å¦‚æœXå’ŒYæ˜¯åŒç±»ï¼Œå°±æŠŠXå’Œå½“å‰ç¾¤ç³»çš„Yè¿èµ·æ¥ï¼Œè¡¨ç¤ºXå’ŒYæ˜¯åŒç±»ã€‚ï¼ˆAã€Bã€Céƒ½è¦ï¼ï¼ï¼‰  

ä»£ç å¦‚ä¸‹
```cpp
#include <bits/stdc++.h>
using namespace std;
int f[150001],ans=0,n,m,x,y,z;
int find(int x)
{
	if (f[x]==x) return x;
	return f[x]=find(f[x]);
}
void merge(int x, int y)
{
	f[find(x)]=find(y);
}
int main()
{
	cin >> n >> m;
	for (int i = 0 ; i <= 150000 ; ++i)
	{
		f[i]=i;
	}
	for (int i = 0 ; i < m ; ++i)
	{
		cin >> z >> x >> y;
		if (x > n || y > n) ans++;
		else if (z == 2)
		{
			if (find(x)==find(y) || find(x+n)==find(y+n) || find(x+n*2)==find(y+n*2) || find(x)==find(y+n*2) || find(x+n)==find(y) || find(x+n*2)==find(y+n)) {ans++;continue;}
			merge(x,y+n);
			merge(x+n,y+n*2);
			merge(x+n*2,y);
		} else if (z == 1)
		{
			if (find(x)==find(y+n) || find(x+n)==find(y+n*2) || find(x+n*2)==find(y) || find(x)==find(y+n*2) || find(x+n)==find(y) || find(x+n*2)==find(y+n)) {ans++;continue;}
			merge(x,y);
			merge(x+n,y+n);
			merge(x+n*2,y+n*2);
		}
	}
	cout << ans <<endl;
	return 0;
}
```

#### å…¶ä»–ä¾‹é¢˜
- [gmojåˆä¸­1375 ã€å¹¶æŸ¥é›†ã€‘å¥‡å¶æ¸¸æˆ](https://gmoj.net/junior/#main/show/1375)
#### å†™åœ¨æœ€å
å¹¶æŸ¥é›†æ•°ç»„è®°å¾—å¼€ä¸‰å€ï¼ï¼ï¼
